<!-- top row: title (left) + import (right) -->
<div class="page-header">
  <h2 class="title">Leads</h2>

  <div class="import-area">
    <!-- hidden file input -->
    <input #fileInput type="file"
           accept=".csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
           style="display:none"
           (change)="onFileSelected($event)">

    <button mat-stroked-button (click)="fileInput.click()">
      <mat-icon>file_upload</mat-icon>
      &nbsp; Import Leads
    </button>
  </div>
</div>

<!-- filters row: two dropdowns + search -->
<div class="filters">
  <!-- Teams dropdown -->
  <mat-form-field appearance="outline" class="filter-field">
    <mat-label>Teams</mat-label>
    <mat-select [(value)]="filterValues.team" (selectionChange)="applyFilter()">
      <mat-option *ngFor="let t of teams" [value]="t">{{ t }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Status dropdown -->
  <mat-form-field appearance="outline" class="filter-field">
    <mat-label>Status</mat-label>
    <mat-select [(value)]="filterValues.status" (selectionChange)="applyFilter()">
      <mat-option *ngFor="let s of statuses" [value]="s">{{ s }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Search input -->
  <mat-form-field appearance="outline" class="search-field">
    <input matInput placeholder="Search leads..."
           [(ngModel)]="filterValues.search"
           (input)="applyFilter()" />
    <button mat-icon-button matSuffix *ngIf="filterValues.search"
            (click)="filterValues.search=''; applyFilter()">
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field>
</div>

<!-- leads table -->
<table mat-table [dataSource]="dataSource" class="mat-elevation-z2 leads-table">
  <!-- Select Checkbox Column -->
  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef>
      <mat-checkbox
        (change)="$event ? masterToggle() : null"
        [checked]="isAllSelected()"
        [indeterminate]="selection.hasValue() && !isAllSelected()"
        [aria-label]="checkboxLabel()">
      </mat-checkbox>
    </th>
    <td mat-cell *matCellDef="let row">
      <mat-checkbox
        (click)="$event.stopPropagation()"
        (change)="$event ? selection.toggle(row) : null"
        [checked]="selection.isSelected(row)"
        [aria-label]="checkboxLabel(row)">
      </mat-checkbox>
    </td>
  </ng-container>

  <!-- Name -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef>Name</th>
    <td mat-cell *matCellDef="let row">{{ row.name }}</td>
  </ng-container>

  <!-- Email -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef>Email ID</th>
    <td mat-cell *matCellDef="let row">{{ row.email }}</td>
  </ng-container>

  <!-- Phone1 -->
  <ng-container matColumnDef="phone1">
    <th mat-header-cell *matHeaderCellDef>Phone1</th>
    <td mat-cell *matCellDef="let row">{{ row.phone1 }}</td>
  </ng-container>

  <!-- Phone2 -->
  <ng-container matColumnDef="phone2">
    <th mat-header-cell *matHeaderCellDef>Phone2</th>
    <td mat-cell *matCellDef="let row">{{ row.phone2 }}</td>
  </ng-container>

  <!-- Status -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let row">{{ row.status }}</td>
  </ng-container>

  <!-- Team -->
  <ng-container matColumnDef="team">
    <th mat-header-cell *matHeaderCellDef>Team</th>
    <td mat-cell *matCellDef="let row">{{ row.team }}</td>
  </ng-container>

  <!-- Actions -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Caller</th>
    <td mat-cell *matCellDef="let row">
      <button mat-icon-button (click)="edit(row)" matTooltip="Edit">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button (click)="assign(row)" matTooltip="Assign/Caller">
        <mat-icon>person</mat-icon>
      </button>
      <button mat-icon-button (click)="remove(row)" matTooltip="Delete">
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
