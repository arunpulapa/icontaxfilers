<div class="leads-grid">
  <!-- KPI Cards -->
  <mat-card *ngFor="let s of stats" class="lead-card">
    <div class="lead-header">
      <mat-icon class="lead-icon" [ngClass]="s.color">{{ s.icon }}</mat-icon>
      <span class="lead-label">{{ s.label }}</span>
    </div>

    <div class="lead-value">{{ s.value }}</div>

    <mat-progress-bar
      *ngIf="s.progress !== undefined"
      [color]="s.color"
      mode="determinate"
      [value]="s.progress">
    </mat-progress-bar>

    <div class="lead-meta">
      <span>{{ s.meta }}</span>
      <span class="trend" [ngClass]="{up: s.trend > 0, down: s.trend < 0}">
        <mat-icon>{{ s.trend > 0 ? 'trending_up' : 'trending_down' }}</mat-icon>
        {{ s.trend }}%
      </span>
    </div>
  </mat-card>
</div>

<!-- Divider -->
<h3 class="section-title">Recent Leads</h3>

<!-- Leads Table -->
<table mat-table [dataSource]="recentLeads" class="mat-elevation-z1 leads-table">
  <!-- Name -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef>Name</th>
    <td mat-cell *matCellDef="let lead">{{ lead.name }}</td>
  </ng-container>

  <!-- Email -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef>Email</th>
    <td mat-cell *matCellDef="let lead">{{ lead.email }}</td>
  </ng-container>

  <!-- Status -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let lead">
      <span [class.qualified]="lead.status === 'Qualified'"
            [class.converted]="lead.status === 'Converted'"
            [class.lost]="lead.status === 'Lost'">
        {{ lead.status }}
      </span>
    </td>
  </ng-container>

  <!-- Date -->
  <ng-container matColumnDef="date">
    <th mat-header-cell *matHeaderCellDef>Date</th>
    <td mat-cell *matCellDef="let lead">{{ lead.date | date }}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="leadCols"></tr>
  <tr mat-row *matRowDef="let row; columns: leadCols;"></tr>
</table>
